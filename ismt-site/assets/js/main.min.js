const navToggle=document.querySelector(".nav-toggle");const navList=document.getElementById("primary-menu");if(navToggle&&navList){navToggle.addEventListener("click",function(){const expanded=navToggle.getAttribute("aria-expanded")==="true";navToggle.setAttribute("aria-expanded",!expanded);navList.classList.toggle("open")})}(function highlightNav(){const navLinks=document.querySelectorAll(".nav-list a");const path=window.location.pathname.split("/").pop()||"index.html";navLinks.forEach(link=>{if(link.getAttribute("href")===path){link.classList.add("active");link.setAttribute("aria-current","page")}else{link.classList.remove("active");link.removeAttribute("aria-current")}})})();(function setYear(){const yearSpan=document.getElementById("year");if(yearSpan){yearSpan.textContent=(new Date).getFullYear()}})();function initCarousel(){const carousel=document.querySelector(".testimonial-cards");if(!carousel)return;const testimonials=Array.from(carousel.querySelectorAll(".testimonial"));const prevBtn=carousel.querySelector(".carousel-btn.prev");const nextBtn=carousel.querySelector(".carousel-btn.next");let current=0;let interval=null;let paused=false;function show(idx){testimonials.forEach((el,i)=>{el.style.display=i===idx?"block":"none";if(i===idx)el.setAttribute("tabindex","0");else el.removeAttribute("tabindex")})}function next(){current=(current+1)%testimonials.length;show(current)}function prev(){current=(current-1+testimonials.length)%testimonials.length;show(current)}function startAuto(){if(interval)clearInterval(interval);interval=setInterval(()=>{if(!paused)next()},5e3)}function pauseAuto(){paused=true}function resumeAuto(){paused=false}prevBtn.addEventListener("click",()=>{prev();pauseAuto()});nextBtn.addEventListener("click",()=>{next();pauseAuto()});carousel.addEventListener("mouseenter",pauseAuto);carousel.addEventListener("mouseleave",resumeAuto);carousel.addEventListener("focusin",pauseAuto);carousel.addEventListener("focusout",resumeAuto);carousel.addEventListener("keydown",e=>{if(e.key==="ArrowLeft"){prev();pauseAuto()}if(e.key==="ArrowRight"){next();pauseAuto()}});show(current);startAuto()}function initNewsFilter(){const select=document.getElementById("news-category");const newsCards=document.querySelectorAll(".news-card");if(!select||!newsCards.length)return;select.addEventListener("change",function(){const val=select.value;newsCards.forEach(card=>{const cat=card.getAttribute("data-category");if(val==="all"||cat===val){card.style.display=""}else{card.style.display="none"}})})}function initContactForm(){const form=document.querySelector(".contact-form");const messages=document.getElementById("form-messages");if(!form||!messages)return;function showMsg(msg,type){messages.textContent=msg;messages.className="form-messages "+(type||"")}function clearErrors(){form.querySelectorAll(".error-msg").forEach(e=>e.remove());form.querySelectorAll("input, textarea").forEach(f=>f.removeAttribute("aria-invalid"))}function errorField(field,msg){const err=document.createElement("div");err.className="error-msg";err.textContent=msg;err.setAttribute("role","alert");field.setAttribute("aria-invalid","true");field.parentNode.appendChild(err)}form.addEventListener("submit",function(e){e.preventDefault();clearErrors();showMsg("","");let valid=true;const name=form.name;const email=form.email;const subject=form.subject;const message=form.message;if(!name.value.trim()){errorField(name,"Name is required.");valid=false}if(!email.value.trim()){errorField(email,"Email is required.");valid=false}else if(!/^\S+@\S+\.\S+$/.test(email.value)){errorField(email,"Please enter a valid email address.");valid=false}if(!subject.value.trim()){errorField(subject,"Subject is required.");valid=false}if(!message.value.trim()){errorField(message,"Message is required.");valid=false}if(valid){showMsg("Thank you! Weâ€™ll get back to you soon.","success");form.reset()}})}(function initByPage(){const body=document.body;if(body.id==="home")initCarousel();if(body.id==="news")initNewsFilter();if(body.id==="contact")initContactForm()})();